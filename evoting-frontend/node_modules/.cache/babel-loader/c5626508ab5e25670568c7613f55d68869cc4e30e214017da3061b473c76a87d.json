{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{ethers}from\"ethers\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SERVER_URL=\"/api\";function App(){const[candidates,setCandidates]=useState([]);const[voteCounts,setVoteCounts]=useState([]);const[selectedCandidate,setSelectedCandidate]=useState(\"\");const[account,setAccount]=useState(null);const[fingerprintData,setFingerprintData]=useState(null);const[adminPanel,setAdminPanel]=useState(false);// ✅ Metamask Connection\nconst connectMetamask=async()=>{if(window.ethereum){const accounts=await window.ethereum.request({method:\"eth_requestAccounts\"});setAccount(accounts[0]);}else{alert(\"Please install MetaMask.\");}};// ✅ Fetch Candidates\nconst fetchCandidates=async()=>{try{const response=await axios.get(`${SERVER_URL}/getCandidates`);setCandidates(response.data);}catch(error){console.error(\"Error fetching candidates:\",error);}};// ✅ Fetch Vote Counts\nconst fetchVoteCounts=async()=>{try{const response=await axios.get(`${SERVER_URL}/getVoteCounts`);setVoteCounts(response.data);}catch(error){console.error(\"Error fetching vote counts:\",error);}};// ✅ Admin: Add Candidate\nconst addCandidate=async name=>{try{await axios.post(`${SERVER_URL}/addCandidate`,{name});alert(\"Candidate added successfully!\");fetchCandidates();}catch(error){console.error(\"Error adding candidate:\",error);alert(\"Failed to add candidate.\");}};// ✅ Admin: Register Voter with Fingerprint\nconst registerVoterWithFingerprint=async()=>{try{const publicKey=await navigator.credentials.create({publicKey:{/* WebAuthn Config */}});setFingerprintData(publicKey);await axios.post(`${SERVER_URL}/registerVoter`,{publicKey,account});alert(\"Voter registered successfully!\");}catch(error){console.error(\"Error registering voter:\",error);alert(\"Fingerprint registration failed.\");}};// ✅ Voter: Authenticate Fingerprint & Vote\nconst authenticateAndVote=async()=>{if(!selectedCandidate){alert(\"Please select a candidate.\");return;}try{const assertion=await navigator.credentials.get({publicKey:{/* WebAuthn Config */}});await axios.post(`${SERVER_URL}/verifyFingerprintVote`,{assertion,candidateIndex:selectedCandidate});alert(\"Vote cast successfully!\");fetchVoteCounts();}catch(error){console.error(\"Error voting:\",error);alert(\"Fingerprint authentication failed.\");}};useEffect(()=>{fetchCandidates();fetchVoteCounts();},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"E-Voting System\"}),/*#__PURE__*/_jsx(\"button\",{onClick:connectMetamask,children:account?`Connected: ${account}`:\"Connect Metamask\"}),adminPanel&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Admin Panel\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Candidate Name\",id:\"candidateName\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>addCandidate(document.getElementById(\"candidateName\").value),children:\"Add Candidate\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Register Voter\"}),/*#__PURE__*/_jsx(\"button\",{onClick:registerVoterWithFingerprint,children:\"Register Voter (Fingerprint)\"})]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Voting Panel\"}),/*#__PURE__*/_jsxs(\"select\",{onChange:e=>setSelectedCandidate(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Candidate\"}),candidates.map((candidate,index)=>/*#__PURE__*/_jsx(\"option\",{value:index,children:candidate},index))]}),/*#__PURE__*/_jsx(\"button\",{onClick:authenticateAndVote,children:\"Vote with Fingerprint\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Vote Counts\"}),/*#__PURE__*/_jsx(\"ul\",{children:voteCounts.map((entry,index)=>/*#__PURE__*/_jsxs(\"li\",{children:[entry.candidate,\": \",entry.votes,\" votes\"]},index))})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","ethers","axios","jsx","_jsx","jsxs","_jsxs","SERVER_URL","App","candidates","setCandidates","voteCounts","setVoteCounts","selectedCandidate","setSelectedCandidate","account","setAccount","fingerprintData","setFingerprintData","adminPanel","setAdminPanel","connectMetamask","window","ethereum","accounts","request","method","alert","fetchCandidates","response","get","data","error","console","fetchVoteCounts","addCandidate","name","post","registerVoterWithFingerprint","publicKey","navigator","credentials","create","authenticateAndVote","assertion","candidateIndex","children","onClick","type","placeholder","id","document","getElementById","value","onChange","e","target","map","candidate","index","entry","votes"],"sources":["C:/Users/Ajaykumar Kavassery/contracts/evoting-project/evoting-frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { ethers } from \"ethers\";\nimport axios from \"axios\";\n\nconst SERVER_URL = \"/api\"; \n\nfunction App() {\n    const [candidates, setCandidates] = useState([]);\n    const [voteCounts, setVoteCounts] = useState([]);\n    const [selectedCandidate, setSelectedCandidate] = useState(\"\");\n    const [account, setAccount] = useState(null);\n    const [fingerprintData, setFingerprintData] = useState(null);\n    const [adminPanel, setAdminPanel] = useState(false);\n\n    // ✅ Metamask Connection\n    const connectMetamask = async () => {\n        if (window.ethereum) {\n            const accounts = await window.ethereum.request({ method: \"eth_requestAccounts\" });\n            setAccount(accounts[0]);\n        } else {\n            alert(\"Please install MetaMask.\");\n        }\n    };\n\n    // ✅ Fetch Candidates\n    const fetchCandidates = async () => {\n        try {\n            const response = await axios.get(`${SERVER_URL}/getCandidates`);\n            setCandidates(response.data);\n        } catch (error) {\n            console.error(\"Error fetching candidates:\", error);\n        }\n    };\n\n    // ✅ Fetch Vote Counts\n    const fetchVoteCounts = async () => {\n        try {\n            const response = await axios.get(`${SERVER_URL}/getVoteCounts`);\n            setVoteCounts(response.data);\n        } catch (error) {\n            console.error(\"Error fetching vote counts:\", error);\n        }\n    };\n\n    // ✅ Admin: Add Candidate\n    const addCandidate = async (name) => {\n        try {\n            await axios.post(`${SERVER_URL}/addCandidate`, { name });\n            alert(\"Candidate added successfully!\");\n            fetchCandidates();\n        } catch (error) {\n            console.error(\"Error adding candidate:\", error);\n            alert(\"Failed to add candidate.\");\n        }\n    };\n\n    // ✅ Admin: Register Voter with Fingerprint\n    const registerVoterWithFingerprint = async () => {\n        try {\n            const publicKey = await navigator.credentials.create({ publicKey: {/* WebAuthn Config */} });\n            setFingerprintData(publicKey);\n            await axios.post(`${SERVER_URL}/registerVoter`, { publicKey, account });\n            alert(\"Voter registered successfully!\");\n        } catch (error) {\n            console.error(\"Error registering voter:\", error);\n            alert(\"Fingerprint registration failed.\");\n        }\n    };\n\n    // ✅ Voter: Authenticate Fingerprint & Vote\n    const authenticateAndVote = async () => {\n        if (!selectedCandidate) {\n            alert(\"Please select a candidate.\");\n            return;\n        }\n        try {\n            const assertion = await navigator.credentials.get({ publicKey: {/* WebAuthn Config */} });\n            await axios.post(`${SERVER_URL}/verifyFingerprintVote`, { assertion, candidateIndex: selectedCandidate });\n            alert(\"Vote cast successfully!\");\n            fetchVoteCounts();\n        } catch (error) {\n            console.error(\"Error voting:\", error);\n            alert(\"Fingerprint authentication failed.\");\n        }\n    };\n\n    useEffect(() => {\n        fetchCandidates();\n        fetchVoteCounts();\n    }, []);\n\n    return (\n        <div>\n            <h1>E-Voting System</h1>\n\n            {/* ✅ Metamask Connection */}\n            <button onClick={connectMetamask}>\n                {account ? `Connected: ${account}` : \"Connect Metamask\"}\n            </button>\n\n            {/* ✅ Admin Panel */}\n            {adminPanel && (\n                <div>\n                    <h2>Admin Panel</h2>\n                    <input type=\"text\" placeholder=\"Candidate Name\" id=\"candidateName\" />\n                    <button onClick={() => addCandidate(document.getElementById(\"candidateName\").value)}>Add Candidate</button>\n                    \n                    <h3>Register Voter</h3>\n                    <button onClick={registerVoterWithFingerprint}>Register Voter (Fingerprint)</button>\n                </div>\n            )}\n\n            {/* ✅ Voter Panel */}\n            <h2>Voting Panel</h2>\n            <select onChange={(e) => setSelectedCandidate(e.target.value)}>\n                <option value=\"\">Select Candidate</option>\n                {candidates.map((candidate, index) => (\n                    <option key={index} value={index}>{candidate}</option>\n                ))}\n            </select>\n            <button onClick={authenticateAndVote}>Vote with Fingerprint</button>\n\n            {/* ✅ Vote Count */}\n            <h2>Vote Counts</h2>\n            <ul>\n                {voteCounts.map((entry, index) => (\n                    <li key={index}>{entry.candidate}: {entry.votes} votes</li>\n                ))}\n            </ul>\n        </div>\n    );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}